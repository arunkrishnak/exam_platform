{% extends 'base.html' %}

{% block title %}Responses for {{ student.username }} - {{ exam.title }}{% endblock %}

{% block content %}
<div class="container">
    <h2 class="text-center mt-3">Responses for {{ student.username }} - {{ exam.title }}</h2>

    <div class="card p-3 mt-3">
        <h3>Questions & Responses</h3>
        {% for response in responses %}
            <div class="mb-3">
                <h5>{{ forloop.counter }}. {{ response.question.text }} <small>({{ response.question.difficulty }})</small></h5>
                <ul>
                    {% for choice in response.question.answer_choices.all %}
                        <li 
                            {% if choice == response.selected_choice %}
                                {% if choice.is_correct %}
                                    style="color: green; font-weight: bold;"
                                {% else %}
                                    style="color: red; font-weight: bold;"
                                {% endif %}
                            {% endif %}
                        >
                            {{ choice.text }}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% empty %}
            <p>No responses found for this exam.</p>
        {% endfor %}
    </div>

    <!-- Display Total and Breakdown Marks -->
    <div class="card p-3 mt-3 text-center">
        <h3>Total Marks: {{ total_marks }} / {{ overall_total }}</h3>
        <p>Easy: {{ easy_marks }} / {{ easy_total }}</p>
        <p>Medium: {{ medium_marks }} / {{ medium_total }}</p>
        <p>Hard: {{ hard_marks }} / {{ hard_total }}</p>
        <hr>
        <h4>Level of Student: {{ level }}</h4>
    </div>
</div>
{% endblock %}
